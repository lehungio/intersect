{"version":3,"sources":["webpack:///webpack/bootstrap d0528fa2230740c0515e","webpack:///./examples.js","webpack:///./intersect.js"],"names":["Example","context","width","height","origin","infiniteLength","Math","sqrt","box","color","thickness","x1","floor","x","pos","half","y1","y","x2","y2","beginPath","moveTo","lineTo","closePath","lineWidth","strokeStyle","stroke","circle","arc","radius","PI","point","text","fillStyle","fillRect","strokeRect","fillText","dir","length","arrow","pos2","drawSegment","clone","point1","point2","elapsed","AABBPointExample","angle","cos","sin","hit","intersectPoint","drawAABB","drawPoint","AABBSegmentExample","pos1","delta","intersectSegment","normalize","drawRay","normal","AABBAABBExample","box1","box2","intersectAABB","AABBSweptAABBExample","staticBox","sweepBoxes","sweepDeltas","tempBox","factor","forEach","i","sweep","sweepAABB","MultipleAABBSweptAABBExample","velocity","movingBox","staticBoxes","out","dot","ux","uy","wx","wy","sweepInto","reflect","collider","CirclePointExample","drawCircle","CircleSegmentExample","CircleAABBExample","CircleCircleExample","circle1","circle2","intersectCircle","CircleSweptAABBExample","CircleSweptCircleExample","sweepCircles","tempCircle","sweepCircle","ready","callback","document","readyState","setTimeout","addEventListener","handler","removeEventListener","exampleIds","examples","Object","keys","id","exampleConstructor","anchor","getElementById","canvas","createElement","parentNode","insertBefore","nextSibling","getContext","translate","example","push","setInterval","tick","abs","clamp","sign","EPSILON","value","min","max","Point","inverseLength","Hit","Sweep","time","AABB","dx","px","dy","py","sx","sy","paddingX","paddingY","scaleX","scaleY","signX","signY","nearTimeX","nearTimeY","farTimeX","farTimeY","nearTime","farTime","direction","staticColliders","nearest","il","Circle","padding","distanceSquared","minDistance","r","mx","my","a","b","c","discr"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0528fa2230740c0515e","'use strict';\n\nimport {AABB, Circle, Point} from './intersect';\n\nclass Example {\n  constructor(context, width, height) {\n    this.context = context;\n    this.width = width;\n    this.height = height;\n    this.origin = new Point(this.width * 0.5, this.height * 0.5);\n    this.infiniteLength = Math.sqrt(this.width * this.width + this.height * this.height);\n  }\n\n  drawAABB(box, color='#fff', thickness=1) {\n    let x1 = Math.floor(this.origin.x + box.pos.x - box.half.x);\n    let y1 = Math.floor(this.origin.y + box.pos.y - box.half.y);\n    let x2 = Math.floor(this.origin.x + box.pos.x + box.half.x);\n    let y2 = Math.floor(this.origin.y + box.pos.y + box.half.y);\n    this.context.beginPath();\n    this.context.moveTo(x1, y1);\n    this.context.lineTo(x2, y1);\n    this.context.lineTo(x2, y2);\n    this.context.lineTo(x1, y2);\n    this.context.lineTo(x1, y1);\n    this.context.closePath();\n    this.context.lineWidth = thickness;\n    this.context.strokeStyle = color;\n    this.context.stroke();\n  }\n\n  drawCircle(circle, color='#fff', thickness=1) {\n    let x = Math.floor(this.origin.x + circle.pos.x);\n    let y = Math.floor(this.origin.y + circle.pos.y);\n    this.context.beginPath();\n    this.context.arc(x, y, circle.radius, 0, 2 * Math.PI, true);\n    this.context.closePath();\n    this.context.lineWidth = thickness;\n    this.context.strokeStyle = color;\n    this.context.stroke();\n  }\n\n  drawPoint(point, color='#fff', text='', thickness=1) {\n    let x = Math.floor(this.origin.x + point.x - (thickness / 2));\n    let y = Math.floor(this.origin.y + point.y - (thickness / 2));\n    this.context.lineWidth = thickness;\n    this.context.fillStyle = color;\n    this.context.strokeStyle = color;\n    this.context.fillRect(x, y, thickness, thickness);\n    this.context.strokeRect(x, y, thickness, thickness);\n    if (text) {\n      this.context.fillText(text, x + thickness * 4, y + thickness * 2);\n    }\n  }\n\n  drawRay(pos, dir, length, color='#fff', arrow=true, thickness=1) {\n    let pos2 = new Point(pos.x + dir.x * length, pos.y + dir.y * length);\n    this.drawSegment(pos, pos2, color, thickness);\n    if (arrow) {\n      pos = pos2.clone();\n      pos2.x = pos.x - dir.x * 4 + dir.y * 4;\n      pos2.y = pos.y - dir.y * 4 - dir.x * 4;\n      this.drawSegment(pos, pos2, color, thickness);\n      pos2.x = pos.x - dir.x * 4 - dir.y * 4;\n      pos2.y = pos.y - dir.y * 4 + dir.x * 4;\n      this.drawSegment(pos, pos2, color, thickness);\n    }\n  }\n\n  drawSegment(point1, point2, color='#fff', thickness=1) {\n    let x1 = Math.floor(this.origin.x + point1.x);\n    let y1 = Math.floor(this.origin.y + point1.y);\n    let x2 = Math.floor(this.origin.x + point2.x);\n    let y2 = Math.floor(this.origin.y + point2.y);\n    this.context.beginPath();\n    this.context.moveTo(x1, y1);\n    this.context.lineTo(x2, y2);\n    this.context.closePath();\n    this.context.lineWidth = thickness;\n    this.context.strokeStyle = color;\n    this.context.stroke();\n  }\n\n  tick(elapsed) {\n    this.context.fillStyle = '#000';\n    this.context.fillRect(0, 0, this.width, this.height);\n  }\n}\n\nclass AABBPointExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.pos = new Point();\n    this.box = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.pos.x = Math.cos(this.angle * 0.4) * 32;\n    this.pos.y = Math.sin(this.angle) * 12;\n    let hit = this.box.intersectPoint(this.pos);\n    this.drawAABB(this.box, '#666');\n    if (hit) {\n      this.drawPoint(this.pos, '#f00');\n      this.drawPoint(hit.pos, '#ff0');\n    } else {\n      this.drawPoint(this.pos, '#0f0');\n    }\n  }\n}\n\nclass AABBSegmentExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.box = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    let pos1 = new Point(Math.cos(this.angle) * 64, Math.sin(this.angle) * 64);\n    let pos2 = new Point(Math.sin(this.angle) * 32, Math.cos(this.angle) * 32);\n    let delta = new Point(pos2.x - pos1.x, pos2.y - pos1.y);\n    let hit = this.box.intersectSegment(pos1, delta);\n    let dir = delta.clone();\n    let length = dir.normalize();\n    this.drawAABB(this.box, '#666');\n    if (hit) {\n      this.drawRay(pos1, dir, length, '#f00');\n      this.drawSegment(pos1, hit.pos, '#ff0');\n      this.drawPoint(hit.pos, '#ff0');\n      this.drawRay(hit.pos, hit.normal, 6, '#ff0', false);\n    } else {\n      this.drawRay(pos1, dir, length, '#0f0');\n    }\n  }\n}\n\nclass AABBAABBExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.box1 = new AABB(new Point(0, 0), new Point(64, 16));\n    this.box2 = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.2 * Math.PI * elapsed;\n    this.box2.pos.x = Math.cos(this.angle) * 96;\n    this.box2.pos.y = Math.sin(this.angle * 2.4) * 24;\n    let hit = this.box1.intersectAABB(this.box2);\n    this.drawAABB(this.box1, '#666');\n    if (hit) {\n      this.drawAABB(this.box2, '#f00');\n      this.box2.pos.x += hit.delta.x;\n      this.box2.pos.y += hit.delta.y;\n      this.drawAABB(this.box2, '#ff0');\n      this.drawPoint(hit.pos, '#ff0');\n      this.drawRay(hit.pos, hit.normal, 4, '#ff0', false);\n    } else {\n      this.drawAABB(this.box2, '#0f0');\n    }\n  }\n}\n\nclass AABBSweptAABBExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.staticBox = new AABB(new Point(0, 0), new Point(112, 16));\n    this.sweepBoxes = [\n      new AABB(new Point(-152, 24), new Point(16, 16)),\n      new AABB(new Point(128, -48), new Point(16, 16)),\n    ];\n    this.sweepDeltas = [\n      new Point(64, -12),\n      new Point(-32, 96),\n    ];\n    this.tempBox = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.drawAABB(this.staticBox, '#666');\n    let factor = ((Math.cos(this.angle) + 1) * 0.5) || 1e-8;\n    this.sweepBoxes.forEach((box, i) => {\n      let delta = this.sweepDeltas[i].clone();\n      delta.x *= factor;\n      delta.y *= factor;\n      let sweep = this.staticBox.sweepAABB(box, delta);\n      let dir = delta.clone();\n      let length = dir.normalize();\n      this.drawAABB(box, '#666');\n      if (sweep.hit) {\n        // Draw a red box at the point where it was trying to move to\n        this.drawRay(box.pos, dir, length, '#f00');\n        this.tempBox.pos.x = box.pos.x + delta.x;\n        this.tempBox.pos.y = box.pos.y + delta.y;\n        this.drawAABB(this.tempBox, '#f00');\n        // Draw a yellow box at the point it actually got to\n        this.tempBox.pos.x = sweep.pos.x;\n        this.tempBox.pos.y = sweep.pos.y;\n        this.drawAABB(this.tempBox, '#ff0');\n        this.drawPoint(sweep.hit.pos, '#ff0');\n        this.drawRay(sweep.hit.pos, sweep.hit.normal, 4, '#ff0', false);\n      } else {\n        this.tempBox.pos.x = sweep.pos.x;\n        this.tempBox.pos.y = sweep.pos.y;\n        this.drawAABB(this.tempBox, '#0f0');\n        this.drawRay(box.pos, dir, length, '#0f0');\n      }\n    });\n  }\n}\n\nclass MultipleAABBSweptAABBExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.delta = new Point();\n    this.velocity = new Point(48, 48);\n    this.movingBox = new AABB(new Point(0, 0), new Point(8, 8));\n    this.staticBoxes = [\n      new AABB(new Point(-96, 0), new Point(8, 48)),\n      new AABB(new Point( 96, 0), new Point(8, 48)),\n      new AABB(new Point(0, -56), new Point(104, 8)),\n      new AABB(new Point(0,  56), new Point(104, 8)),\n    ];\n  }\n\n  reflect(velocity, normal, out) {\n    let dot = velocity.x * normal.x + velocity.y * normal.y;\n    let ux = normal.x * dot;\n    let uy = normal.y * dot;\n    let wx = velocity.x - ux;\n    let wy = velocity.y - uy;\n    out.x = wx - ux;\n    out.y = wy - uy;\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.delta.x = this.velocity.x * elapsed;\n    this.delta.y = this.velocity.y * elapsed;\n    let sweep = this.movingBox.sweepInto(this.staticBoxes, this.delta);\n    if (sweep.hit) {\n      // This should really attempt to slide along the hit normal, and use up\n      // the rest of the velocity, but that's a bit much for this example\n      this.reflect(this.velocity, sweep.hit.normal, this.velocity);\n    }\n    this.staticBoxes.forEach((staticBox) => {\n      if (sweep.hit && sweep.hit.collider === staticBox) {\n        this.drawAABB(staticBox, '#aaa');\n      } else {\n        this.drawAABB(staticBox, '#666');\n      }\n    });\n    this.movingBox.pos = sweep.pos;\n    this.drawAABB(this.movingBox, sweep.hit ? '#ff0' : '#0f0');\n  }\n}\n\nclass CirclePointExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.pos = new Point();\n    this.circle = new Circle(new Point(0, 0), 24);\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.pos.x = Math.cos(this.angle * 0.4) * 32;\n    this.pos.y = Math.sin(this.angle) * 12;\n    let hit = this.circle.intersectPoint(this.pos);\n    this.drawCircle(this.circle, '#666');\n    if (hit) {\n      this.drawPoint(this.pos, '#f00');\n      this.drawPoint(hit.pos, '#ff0');\n    } else {\n      this.drawPoint(this.pos, '#0f0');\n    }\n  }\n}\n\nclass CircleSegmentExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.circle = new Circle(new Point(0, 0), 24);\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    let pos1 = new Point(Math.cos(this.angle) * 64, Math.sin(this.angle) * 64);\n    let pos2 = new Point(Math.sin(this.angle) * 32, Math.cos(this.angle) * 32);\n    let delta = new Point(pos2.x - pos1.x, pos2.y - pos1.y);\n    let hit = this.circle.intersectSegment(pos1, delta);\n    let dir = delta.clone();\n    let length = dir.normalize();\n    this.drawCircle(this.circle, '#666');\n    if (hit) {\n      this.drawRay(pos1, dir, length, '#f00');\n      this.drawSegment(pos1, hit.pos, '#ff0');\n      this.drawPoint(hit.pos, '#ff0');\n      this.drawRay(hit.pos, hit.normal, 6, '#ff0', false);\n    } else {\n      this.drawRay(pos1, dir, length, '#0f0');\n    }\n  }\n}\n\nclass CircleAABBExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.circle = new Circle(new Point(0, 0), 32);\n    this.box = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.2 * Math.PI * elapsed;\n    this.box.pos.x = Math.cos(this.angle) * 96;\n    this.box.pos.y = Math.sin(this.angle * 2.4) * 24;\n    let hit = this.circle.intersectAABB(this.box);\n    this.drawCircle(this.circle, '#666');\n    if (hit) {\n      this.drawAABB(this.box, '#f00');\n      this.box.pos.x += hit.delta.x;\n      this.box.pos.y += hit.delta.y;\n      this.drawAABB(this.box, '#ff0');\n      this.drawPoint(hit.pos, '#ff0');\n      this.drawRay(hit.pos, hit.normal, 4, '#ff0', false);\n    } else {\n      this.drawAABB(this.box, '#0f0');\n    }\n  }\n}\n\nclass CircleCircleExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.circle1 = new Circle(new Point(0, 0), 32);\n    this.circle2 = new Circle(new Point(0, 0), 16);\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.2 * Math.PI * elapsed;\n    this.circle2.pos.x = Math.cos(this.angle) * 96;\n    this.circle2.pos.y = Math.sin(this.angle * 2.4) * 24;\n    let hit = this.circle1.intersectCircle(this.circle2);\n    this.drawCircle(this.circle1, '#666');\n    if (hit) {\n      this.drawCircle(this.circle2, '#f00');\n      this.circle2.pos.x += hit.delta.x;\n      this.circle2.pos.y += hit.delta.y;\n      this.drawCircle(this.circle2, '#ff0');\n      this.drawPoint(hit.pos, '#ff0');\n      this.drawRay(hit.pos, hit.normal, 4, '#ff0', false);\n    } else {\n      this.drawCircle(this.circle2, '#0f0');\n    }\n  }\n}\n\nclass CircleSweptAABBExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.circle = new Circle(new Point(0, 0), 112);\n    this.sweepBoxes = [\n      new AABB(new Point(-152, 24), new Point(16, 16)),\n      new AABB(new Point(128, -48), new Point(16, 16)),\n    ];\n    this.sweepDeltas = [\n      new Point(64, -12),\n      new Point(-32, 96),\n    ];\n    this.tempBox = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.drawCircle(this.circle, '#666');\n    let factor = ((Math.cos(this.angle) + 1) * 0.5) || 1e-8;\n    this.sweepBoxes.forEach((box, i) => {\n      let delta = this.sweepDeltas[i].clone();\n      delta.x *= factor;\n      delta.y *= factor;\n      let sweep = this.circle.sweepAABB(box, delta);\n      let dir = delta.clone();\n      let length = dir.normalize();\n      this.drawAABB(box, '#666');\n      if (sweep.hit) {\n        // Draw a red box at the point where it was trying to move to\n        this.drawRay(box.pos, dir, length, '#f00');\n        this.tempBox.pos.x = box.pos.x + delta.x;\n        this.tempBox.pos.y = box.pos.y + delta.y;\n        this.drawAABB(this.tempBox, '#f00');\n        // Draw a yellow box at the point it actually got to\n        this.tempBox.pos.x = sweep.pos.x;\n        this.tempBox.pos.y = sweep.pos.y;\n        this.drawAABB(this.tempBox, '#ff0');\n        this.drawPoint(sweep.hit.pos, '#ff0');\n        this.drawRay(sweep.hit.pos, sweep.hit.normal, 4, '#ff0', false);\n      } else {\n        this.tempBox.pos.x = sweep.pos.x;\n        this.tempBox.pos.y = sweep.pos.y;\n        this.drawAABB(this.tempBox, '#0f0');\n        this.drawRay(box.pos, dir, length, '#0f0');\n      }\n    });\n  }\n}\n\nclass CircleSweptCircleExample extends Example {\n  constructor(context, width, height) {\n    super(context, width, height);\n    this.angle = 0;\n    this.circle = new Circle(new Point(0, 0), 112);\n    this.sweepCircles = [\n      new Circle(new Point(-152, 24), 16),\n      new Circle(new Point(128, -48), 16),\n    ];\n    this.sweepDeltas = [\n      new Point(64, -12),\n      new Point(-32, 96),\n    ];\n    this.tempCircle = new Circle(new Point(0, 0), 16);\n  }\n\n  tick(elapsed) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.drawCircle(this.circle, '#666');\n    let factor = ((Math.cos(this.angle) + 1) * 0.5) || 1e-8;\n    this.sweepCircles.forEach((circle, i) => {\n      let delta = this.sweepDeltas[i].clone();\n      delta.x *= factor;\n      delta.y *= factor;\n      let sweep = this.circle.sweepCircle(circle, delta);\n      let dir = delta.clone();\n      let length = dir.normalize();\n      this.drawCircle(circle, '#666');\n      if (sweep.hit) {\n        // Draw a red circle at the point where it was trying to move to\n        this.drawRay(circle.pos, dir, length, '#f00');\n        this.tempCircle.pos.x = circle.pos.x + delta.x;\n        this.tempCircle.pos.y = circle.pos.y + delta.y;\n        this.drawCircle(this.tempCircle, '#f00');\n        // Draw a yellow circle at the point it actually got to\n        this.tempCircle.pos.x = sweep.pos.x;\n        this.tempCircle.pos.y = sweep.pos.y;\n        this.drawCircle(this.tempCircle, '#ff0');\n        this.drawPoint(sweep.hit.pos, '#ff0');\n        this.drawRay(sweep.hit.pos, sweep.hit.normal, 4, '#ff0', false);\n      } else {\n        this.tempCircle.pos.x = sweep.pos.x;\n        this.tempCircle.pos.y = sweep.pos.y;\n        this.drawCircle(this.tempCircle, '#0f0');\n        this.drawRay(circle.pos, dir, length, '#0f0');\n      }\n    });\n  }\n}\n\nfunction ready(callback) {\n  if (document.readyState == 'complete') {\n    setTimeout(callback, 1);\n    return;\n  }\n  document.addEventListener('DOMContentLoaded', function handler() {\n    document.removeEventListener('DOMContentLoaded', handler, false);\n    callback();\n  }, false);\n}\n\nready(() => {\n  let exampleIds = {\n    'aabb-vs-point': AABBPointExample,\n    'aabb-vs-segment': AABBSegmentExample,\n    'aabb-vs-aabb': AABBAABBExample,\n    'aabb-vs-swept-aabb': AABBSweptAABBExample,\n    'sweeping-an-aabb-through-multiple-objects': MultipleAABBSweptAABBExample,\n    'circle-vs-point': CirclePointExample,\n    'circle-vs-segment': CircleSegmentExample,\n    'circle-vs-aabb': CircleAABBExample,\n    'circle-vs-circle': CircleCircleExample,\n    'circle-vs-swept-aabb': CircleSweptAABBExample,\n    'circle-vs-swept-circle': CircleSweptCircleExample,\n  };\n\n  let examples = [];\n  Object.keys(exampleIds).forEach((id) => {\n    let exampleConstructor = exampleIds[id];\n    let anchor = document.getElementById(id);\n    if (anchor) {\n      let canvas = document.createElement('canvas');\n      anchor.parentNode.insertBefore(canvas, anchor.nextSibling);\n      let width = canvas.width = 640;\n      let height = canvas.height = 160;\n      let context = canvas.getContext('2d');\n      context.translate(0.5, 0.5);\n      let example = new exampleConstructor(context, width, height);\n      if (example) {\n        examples.push(example);\n      }\n    }\n  });\n\n  setInterval(() => {\n    examples.forEach((example) => example.tick(1 / 30));\n  }, 1000 / 30);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./examples.js","'use strict';\n\nexport const EPSILON = 1e-8;\n\nexport function abs(value) {\n  return value < 0 ? -value : value;\n}\n\nexport function clamp(value, min, max) {\n  if (value < min) {\n    return min;\n  } else if (value > max) {\n    return max;\n  } else {\n    return value;\n  }\n}\n\nexport function sign(value) {\n  return value < 0 ? -1 : 1;\n}\n\nexport class Point {\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  clone() {\n    return new Point(this.x, this.y);\n  }\n\n  normalize() {\n    let length = this.x * this.x + this.y * this.y;\n    if (length > 0) {\n      length = Math.sqrt(length);\n      let inverseLength = 1.0 / length;\n      this.x *= inverseLength;\n      this.y *= inverseLength;\n    } else {\n      this.x = 1;\n      this.y = 0;\n    }\n    return length;\n  }\n}\n\nexport class Hit {\n  constructor(collider) {\n    this.collider = collider;\n    this.pos = new Point();\n    this.delta = new Point();\n    this.normal = new Point();\n  }\n}\n\nexport class Sweep {\n  constructor() {\n    this.hit = null;\n    this.pos = new Point();\n    this.time = 1;\n  }\n}\n\nexport class AABB {\n  constructor(pos, half) {\n    this.pos = pos;\n    this.half = half;\n  }\n\n  intersectPoint(point) {\n    const dx = point.x - this.pos.x;\n    const px = this.half.x - abs(dx);\n    if (px <= 0) {\n      return null;\n    }\n\n    const dy = point.y - this.pos.y;\n    const py = this.half.y - abs(dy);\n    if (py <= 0) {\n      return null;\n    }\n\n    let hit = new Hit(this);\n    if (px < py) {\n      const sx = sign(dx);\n      hit.delta.x = px * sx;\n      hit.normal.x = sx;\n      hit.pos.x = this.pos.x + (this.half.x * sx);\n      hit.pos.y = point.y;\n    } else {\n      const sy = sign(dy);\n      hit.delta.y = py * sy;\n      hit.normal.y = sy;\n      hit.pos.x = point.x;\n      hit.pos.y = this.pos.y + (this.half.y * sy);\n    }\n    return hit;\n  }\n\n  intersectSegment(pos, delta, paddingX = 0, paddingY = 0) {\n    let scaleX = 1.0 / delta.x;\n    let scaleY = 1.0 / delta.y;\n    let signX = sign(scaleX);\n    let signY = sign(scaleY);\n    let nearTimeX = (this.pos.x - signX * (this.half.x + paddingX) - pos.x) * scaleX;\n    let nearTimeY = (this.pos.y - signY * (this.half.y + paddingY) - pos.y) * scaleY;\n    let farTimeX = (this.pos.x + signX * (this.half.x + paddingX) - pos.x) * scaleX;\n    let farTimeY = (this.pos.y + signY * (this.half.y + paddingY) - pos.y) * scaleY;\n    if (nearTimeX > farTimeY || nearTimeY > farTimeX) {\n      return null;\n    }\n\n    let nearTime = nearTimeX > nearTimeY ? nearTimeX : nearTimeY;\n    let farTime = farTimeX < farTimeY ? farTimeX : farTimeY;\n    if (nearTime >= 1 || farTime <= 0) {\n      return null;\n    }\n\n    let hit = new Hit(this);\n    hit.time = clamp(nearTime, 0, 1);\n    if (nearTimeX > nearTimeY) {\n      hit.normal.x = -signX;\n      hit.normal.y = 0;\n    } else {\n      hit.normal.x = 0;\n      hit.normal.y = -signY;\n    }\n    hit.delta.x = hit.time * delta.x;\n    hit.delta.y = hit.time * delta.y;\n    hit.pos.x = pos.x + hit.delta.x;\n    hit.pos.y = pos.y + hit.delta.y;\n    return hit;\n  }\n\n  intersectAABB(box) {\n    let dx = box.pos.x - this.pos.x;\n    let px = (box.half.x + this.half.x) - abs(dx);\n    if (px <= 0) {\n      return null;\n    }\n\n    let dy = box.pos.y - this.pos.y;\n    let py = (box.half.y + this.half.y) - abs(dy);\n    if (py <= 0) {\n      return null;\n    }\n\n    let hit = new Hit(this);\n    if (px < py) {\n      let sx = sign(dx);\n      hit.delta.x = px * sx;\n      hit.normal.x = sx;\n      hit.pos.x = this.pos.x + (this.half.x * sx);\n      hit.pos.y = box.pos.y;\n    } else {\n      let sy = sign(dy);\n      hit.delta.y = py * sy;\n      hit.normal.y = sy;\n      hit.pos.x = box.pos.x;\n      hit.pos.y = this.pos.y + (this.half.y * sy);\n    }\n    return hit;\n  }\n\n  sweepAABB(box, delta) {\n    let sweep = new Sweep();\n    if (delta.x === 0 && delta.y === 0) {\n      sweep.pos.x = box.pos.x;\n      sweep.pos.y = box.pos.y;\n      sweep.hit = this.intersectAABB(box);\n      if (sweep.hit) {\n        sweep.time = sweep.hit.time = 0;\n      } else {\n        sweep.time = 1;\n      }\n      return sweep;\n    }\n\n    sweep.hit = this.intersectSegment(box.pos, delta, box.half.x, box.half.y);\n    if (sweep.hit) {\n      sweep.time = clamp(sweep.hit.time - EPSILON, 0, 1);\n      sweep.pos.x = box.pos.x + delta.x * sweep.time;\n      sweep.pos.y = box.pos.y + delta.y * sweep.time;\n      let direction = delta.clone();\n      direction.normalize();\n      sweep.hit.pos.x = clamp(\n        sweep.hit.pos.x + direction.x * box.half.x,\n        this.pos.x - this.half.x,\n        this.pos.x + this.half.x);\n      sweep.hit.pos.y = clamp(\n        sweep.hit.pos.y + direction.y * box.half.y,\n        this.pos.y - this.half.y,\n        this.pos.y + this.half.y);\n    } else {\n      sweep.pos.x = box.pos.x + delta.x;\n      sweep.pos.y = box.pos.y + delta.y;\n      sweep.time = 1;\n    }\n    return sweep;\n  }\n\n  sweepInto(staticColliders, delta) {\n    let nearest = new Sweep();\n    nearest.time = 1;\n    nearest.pos.x = this.pos.x + delta.x;\n    nearest.pos.y = this.pos.y + delta.y;\n    for (let i = 0, il = staticColliders.length; i < il; i++) {\n      let sweep = staticColliders[i].sweepAABB(this, delta);\n      if (sweep.time < nearest.time) {\n        nearest = sweep;\n      }\n    }\n    return nearest;\n  }\n}\n\nexport class Circle {\n  constructor(pos, radius) {\n    this.pos = pos;\n    this.radius = radius;\n  }\n\n  intersectPoint(point, padding=0) {\n    let dx = point.x - this.pos.x;\n    let dy = point.y - this.pos.y;\n    let distanceSquared = dx * dx + dy * dy;\n    let minDistance = this.radius + padding;\n    if (distanceSquared >= (minDistance * minDistance)) {\n      return null;\n    }\n    let hit = new Hit(this);\n    hit.normal.x = dx;\n    hit.normal.y = dy;\n    hit.normal.normalize();\n    hit.pos.x = this.pos.x + hit.normal.x * this.radius;\n    hit.pos.y = this.pos.y + hit.normal.y * this.radius;\n    hit.delta.x = (hit.pos.x + hit.normal.x * padding) - point.x;\n    hit.delta.y = (hit.pos.y + hit.normal.y * padding) - point.y;\n    return hit;\n  }\n\n  intersectSegment(pos, delta, padding=0) {\n    let r = this.radius + padding;\n    let mx = pos.x - this.pos.x;\n    let my = pos.y - this.pos.y;\n    let dx = delta.x;\n    let dy = delta.y;\n    let a = dx * dx + dy * dy;              // D . D\n    let b = 2 * (mx * dx + my * dy);        // 2(M . D)\n    let c = (mx * mx + my * my) - (r * r);  // (M . M) - r^2\n    let discr = (b * b) - (4 * a * c);      // b^2 - 4ac\n    if (discr < 0) {\n      return null;\n    }\n\n    let time = (-b - Math.sqrt(discr)) / (2 * a);\n    if (time > 1) {\n      return null;\n    }\n\n    time = clamp(time, 0, 1);\n    let hit = new Hit(this);\n    hit.normal.x = mx + time * dx;\n    hit.normal.y = my + time * dy;\n    hit.normal.normalize();\n    hit.pos.x = pos.x + time * dx;\n    hit.pos.y = pos.y + time * dy;\n    hit.time = time;\n    return hit;\n  }\n\n  intersectAABB(box) {\n    let dx = clamp(this.pos.x, box.pos.x - box.half.x, box.pos.x + box.half.x);\n    let dy = clamp(this.pos.y, box.pos.y - box.half.y, box.pos.y + box.half.y);\n    dx -= this.pos.x;\n    dy -= this.pos.y;\n    let distanceSquared = dx * dx + dy * dy;\n    if (distanceSquared >= this.radius * this.radius) {\n      return null;\n    }\n\n    let hit = new Hit(this);\n    hit.normal.x = box.pos.x - this.pos.x;\n    hit.normal.y = box.pos.y - this.pos.y;\n    hit.normal.normalize();\n    hit.pos.x = this.pos.x + (hit.normal.x * this.radius);\n    hit.pos.y = this.pos.y + (hit.normal.y * this.radius);\n    let px, py;\n    if (abs(hit.normal.x) > abs(hit.normal.y)) {\n      px = box.half.x * sign(hit.normal.x);\n      py = px * (hit.normal.y) / hit.normal.x;\n    } else {\n      py = box.half.y * sign(hit.normal.y);\n      px = (py * hit.normal.x) / hit.normal.y;\n    }\n    hit.delta.x = (hit.pos.x + px) - box.pos.x;\n    hit.delta.y = (hit.pos.y + py) - box.pos.y;\n    return hit;\n  }\n\n  intersectCircle(circle) {\n    return this.intersectPoint(circle.pos, circle.radius);\n  }\n\n  sweepCircle(circle, delta) {\n    let sweep = new Sweep();\n    if (delta.x === 0 && delta.y === 0) {\n      sweep.pos.x = circle.pos.x;\n      sweep.pos.y = circle.pos.y;\n      sweep.hit = this.intersectCircle(circle);\n      if (sweep.hit) {\n        sweep.time = sweep.hit.time = 0;\n      } else {\n        sweep.time = 1;\n      }\n      return sweep;\n    }\n    sweep.hit = this.intersectSegment(circle.pos, delta, circle.radius);\n    if (sweep.hit) {\n      sweep.time = clamp(sweep.hit.time - EPSILON, 0, 1);\n      sweep.pos.x = circle.pos.x + delta.x * sweep.time;\n      sweep.pos.y = circle.pos.y + delta.y * sweep.time;\n      sweep.hit.pos.x -= sweep.hit.normal.x * circle.radius;\n      sweep.hit.pos.y -= sweep.hit.normal.y * circle.radius;\n    } else {\n      sweep.pos.x = circle.pos.x + delta.x;\n      sweep.pos.y = circle.pos.y + delta.y;\n    }\n    return sweep;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./intersect.js"],"sourceRoot":""}